<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> AscendEd - Command Center </title>
        <link rel="stylesheet" href="/static/css/command-center.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
        <script type="module" src="/static/js/command-center.js"></script>
        <script type="module">
            // Make functions globally accessible
            import '/static/js/dashboard.js';
            
            window.goToDashboard = function() {
                window.location.href = '/src/pages/dashboard/user-dashboard.html';
            };
        </script>
    </head>
    <body>
        <header>
            <div class="header-left">
                <i class="bi bi-cpu"></i> 
                <h1>AscendEd<span>: Tech Lab Breakout</span></h1>
            </div>
            
            <div class="header-right">
                <button class="back-btn" onclick="goToDashboard()">
                    <i class="bi bi-arrow-left-circle"></i>
                </button>
                
                <button class="cutscene-btn" onclick="playCutscene()">
                    <i class="bi bi-play-circle"></i>
                </button>
                
                <button class="profile-btn" onclick="toggleProfile()">
                    <i class="bi bi-person-circle"></i>
                </button>
                
                <button class="help-btn" onclick="toggleHelp()">
                    <i class="bi bi-question-circle"></i>
                </button>
            </div>

            <div class="module-nav">
                <div class="module-left">
                    <h1><i class="bi bi-command"></i> Command Center: </h1>
                </div>
                <div class="module-right">
                    <button class="module-nav-btn flowchart">
                        <i class="bi bi-diagram-3"></i>
                        FLOWBYTE
                    </button>
                    <button class="module-nav-btn networking">
                        <i class="bi bi-hdd-network"></i>
                        NETXUS
                    </button>
                    <button class="module-nav-btn ai-training">
                        <i class="bi bi-robot"></i>
                        AITRIX
                    </button>
                    <button class="module-nav-btn database">
                        <i class="bi bi-database"></i>
                        SCHEMAX
                    </button>
                    <button class="module-nav-btn programming">
                        <i class="bi bi-code-slash"></i>
                        CODEVANCE
                    </button>
                </div>
            </div>

            <!-- Profile Panel -->
            <div class="profile-panel" id="profilePanel">
                <div class="profile-header">
                    <h3> User Profile </h3>
                    <button class="close-profile" onclick="toggleProfile()">
                        <i class="bi bi-x"></i>
                    </button>
                </div>

                <div class="profile-content">
                    <div class="profile-info">
                        <div class="profile-avatar">
                            <i class="bi bi-person-circle"></i>
                        </div>
                        <h4 id="profileUsername">Username</h4>
                        <p id="profileEmail">user@email.com</p>
                    </div>

                    <div class="profile-actions">
                        <button class="profile-action-btn" onclick="editProfile()">
                            <i class="bi bi-pencil-square"></i>
                            Edit Profile
                        </button>
                        
                        <button class="profile-action-btn" onclick="changePassword()">
                            <i class="bi bi-key"></i>
                            Change Password
                        </button>
                        
                        <button class="profile-action-btn logout-btn" onclick="logout()">
                            <i class="bi bi-box-arrow-right"></i>
                            Log Out
                        </button>
                    </div>
                </div>
            </div>

            <!-- Help Panel -->
            <div class="help-panel" id="helpPanel">
                <div class="help-header">
                    <h3> Help & Information </h3>
                    <button class="close-help" onclick="toggleHelp()">
                        <i class="bi bi-x"></i>
                    </button>
                </div>

                <div class="help-content">
                    <h4> About Dashboard </h4>
                    <p>
                        Welcome to your AscendEd dashboard! Here you can track your progress,
                        view achievements, and continue your learning journey.
                    </p>
                    
                    <h4> Navigation </h4>
                    <ul>
                        <li> View your current level and progress </li>
                        <li> Access completed and upcoming challenges </li>
                        <li> Check your leaderboard ranking </li>
                        <li> Manage your profile settings </li>
                    </ul>
                    
                    <h4> Tips </h4>
                    <ul>
                        <li> Complete daily challenges for bonus points </li>
                        <li> Share your progress with friends </li>
                        <li> Check back regularly for new content </li>
                    </ul>
                </div>
            </div>
            
        </header>

        <main id="gameDisplay">
            <div class="loading-screen">
                <i class="bi bi-cpu-fill"></i>
                <span>Initializing Command Center...</span>
            </div>
        </main>
        
        <script>
            // Handle direct room navigation from dashboard
            document.addEventListener('DOMContentLoaded', () => {
                const targetRoom = sessionStorage.getItem('targetRoom');
                if (targetRoom) {
                    sessionStorage.removeItem('targetRoom');
                    // Navigate to room after command center is loaded
                    setTimeout(() => {
                        if (window.commandCenter) {
                            window.commandCenter.navigateToRoom(targetRoom);
                        }
                    }, 1000);
                }
            });
        </script>
    </body>
</html>